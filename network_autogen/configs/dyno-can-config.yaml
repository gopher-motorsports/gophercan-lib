buses:
    bus_0:
        name: GCAN0
        baud_rate: 1000000
        motec_name: Main Bus
    bus_1:
        name: GCAN1
        baud_rate: 1000000
        motec_name: Unused
    bus_2:
        name: GCAN2
        baud_rate: 1000000
        motec_name: Unused

modules:
    # this is probably the 2022 DLM but this makes it work better with all the
    # code that expects a PLM to be there
    PLM:
        id: 1
        buses:
            - GCAN0
            - GCAN1
            - GCAN2
        motec_name: Data Logging Module

    DAM:
        id: 2
        buses:
            - GCAN0
        motec_name: Data Aquisition Module

    SH_TEMPS:
        id: 3
        buses:
            - GCAN0
        motec_name: Sensor Hub 1

    SH_PRESSURES:
        id: 4
        buses:
            - GCAN0
        motec_name: Sensor Hub 2

    SWM:
        id: 5
        buses:
            - GCAN0
        motec_name: Steering Wheel Module

    TCM:
        id: 6
        buses:
            - GCAN0
        motec_name: Transmission Control Module

    # ECU is also on GCAN0, but is not a GCAN module

parameters:
    # ECU Sensors:
    # all are sent on the bus as S16s (MSB) and encoded in GCAN as a float
    engineRPM_rpm:
        id: 1
        motec_name: Engine RPM
        unit: rpm
        type: FLOATING
        encoding: MSB
        scale: 1
        offset: 0

    throttlePos_percent:
        id: 2
        motec_name: Throttle Pos
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    engineTemp_C:
        id: 3
        motec_name: Engine Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    oilTemp_C:
        id: 4
        motec_name: Eng Oil Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    oilPressure_kPa:
        id: 5
        motec_name: Eng Oil Pres
        unit: kPa
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    manifoldPressure_kPa:
        id: 6
        motec_name: Manifold Pres
        unit: kPa
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    manifoldTemp_C:
        id: 7
        motec_name: Air Temp Inlet
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    fuelPressure_kPa:
        id: 8
        motec_name: Fuel Pres
        unit: kPa
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    lambda1_LA:
        id: 9
        motec_name: Lambda 1
        unit: LA
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    # Steering Wheel Module
    swUpshift_state:
        id: 10
        motec_name: Wheel Upshift Paddle Pos
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swDownshift_state:
        id: 11
        motec_name: Wheel Downshift Paddle Pos
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swSlowClutch_state:
        id: 12
        motec_name: Wheel Slow Clutch
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swFastClutch_state:
        id: 13
        motec_name: Wheel Fast Clutch
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swButon0_state:
        id: 14
        motec_name: Wheel Button 0
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swButon1_state:
        id: 15
        motec_name: Wheel Button 1
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swButon2_state:
        id: 16
        motec_name: Wheel Button 2
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swButon3_state:
        id: 17
        motec_name: Wheel Button 3
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    displayPage_state:
        id: 18
        motec_name: Display Page
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    swDial_ul:
        id: 19
        motec_name: Wheel Dial
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0
    # END SWM

    # User channel 1
    waterFlowRate_LPerMin:
        id: 20
        motec_name: Water Flow Rate
        unit: L/min
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # User channel 2
    fuelFlowRate_LPerMin:
        id: 21
        motec_name: Fuel Flow Rate
        unit: L/min
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # User channel 3
    dynoTorque_V:
        id: 22
        motec_name: Dyno Torque
        unit: V
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    # Internal ECU Parameters:
    batteryVoltage_V:
        id: 23
        motec_name: Battery Volts
        unit: V
        type: FLOATING
        encoding: MSB
        scale: 0.01
        offset: 0

    ecu5VEng_V:
        id: 24
        motec_name: ECU 5V Eng Volts
        unit: V
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    ecu5VAux_V:
        id: 25
        motec_name: ECU 5V Aux Volts
        unit: V
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    ecuTemp_C:
        id: 26
        motec_name: ECU Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    aimLambda1_LA:
        id: 27
        motec_name: Aim Lambda 1
        unit: LA
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    fuelCutLevel_percent:
        id: 28
        motec_name: Fuel Cut Level
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 0.392157
        offset: 0

    ignCutLevel_percent:
        id: 29
        motec_name: Ign Cut Level
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 0.392157
        offset: 0

    ignAdvance_degrees:
        id: 30
        motec_name: Ign Advance
        unit: dBTDC
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    fuelInjDuty_percent:
        id: 31
        motec_name: Fuel Inj Duty
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # Aux Output 5
    oilFanDuty_percent:
        id: 32
        motec_name: Oil Fan Duty
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 1
        offset: 0

    # Aux Output 6
    waterPumpDuty_percent:
        id: 33
        motec_name: Water Pump Duty
        unit: '%'
        type: FLOATING
        encoding: MSB
        scale: 1
        offset: 0

    # additional sensors
    crankTorque_Nm:
        id: 34
        motec_name: Crank Torque
        unit: Nm
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    oilRadTemp1_C:
        id: 35
        motec_name: Oil Rad Temp 1
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    oilRadTemp2_C:
        id: 36
        motec_name: Oil Rad Temp 2
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    waterTempBeforeOil_C:
        id: 37
        motec_name: Water Temp Before Oil
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    waterTempAfterOil_C:
        id: 38
        motec_name: Water Temp After Oil
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    waterTempBeforeHeatExchanger_C:
        id: 39
        motec_name: Water Temp Before Heat Exchanger
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    waterTempAfterHeatExchanger_C:
        id: 40
        motec_name: Water Temp After Heat Exchanger
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # Pressure Sensors
    pressure1_psi:
        id: 41
        motec_name: Oil Cooler Outlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure2_psi:
        id: 42
        motec_name: Oil Cooler Inlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure3_psi:
        id: 43
        motec_name: Heat Exchanger Inlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure4_psi:
        id: 44
        motec_name: Manifold Air Pressure
        unit: kPa
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure5_psi:
        id: 45
        motec_name: Header Tank Outlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure6_psi:
        id: 46
        motec_name: Heat Exchanger Outlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure7_psi:
        id: 47
        motec_name: Engine Inlet Pressure
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    pressure8_psi:
        id: 48
        motec_name: Unused Pressure Input
        unit: psi
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # Temperature Sensors
    temp1_C:
        id: 49
        motec_name: Heat Exchanger Temp Out
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp2_C:
        id: 50
        motec_name: Heat Exchanger Temp In
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp3_C:
        id: 51
        motec_name: Engine Inlet Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp4_C:
        id: 52
        motec_name: Oil Cooler Water In Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp5_C:
        id: 53
        motec_name: Oil Cooler Water Out
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp6_C:
        id: 54
        motec_name: Oil Temp Out
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp7_C:
        id: 55
        motec_name: Engine Outlet Temp
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    temp8_C:
        id: 56
        motec_name: Oil Temp In
        unit: C
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # Flow Sensors
    flowRate1_Hz:
        id: 57
        motec_name: Building Flow
        unit: Hz
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    flowRate2_Hz:
        id: 58
        motec_name: Engine Flow
        unit: Hz
        type: FLOATING
        encoding: MSB
        scale: 0.1
        offset: 0

    # Other
    lapBeacon_ul:
        id: 59
        motec_name: Lap Beacon (Placeholder)
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    loadcell_voltage:
        id: 60
        motec_name: Load Cell
        unit: V
        type: FLOATING
        encoding: MSB
        scale: 0.001
        offset: 0

    # Transmission Controller Sensors:
    shifterPosition_mm:
        id: 61
        motec_name: Shifter Position
        unit: mm
        type: FLOATING
        encoding: MSB
        scale: 0.01220703125 # [0-50] -> [0-4096]
        offset: 0

    clutchPosition_mm:
        id: 62
        motec_name: Clutch Position
        unit: mm
        type: FLOATING
        encoding: MSB
        scale: 0.01220703125 # [0-50] -> [0-4096]
        offset: 0

    gearPosition_mm:
        id: 63
        motec_name: Gear Position
        unit: mm
        type: FLOATING
        encoding: MSB
        scale: 0.001220703125 # [0-5] -> [0-4096]
        offset: 0

    counterShaftSpeed_rpm:
        id: 64
        motec_name: Counter Shaft Speed
        unit: rpm
        type: FLOATING
        encoding: MSB
        scale: 1 # designed to be sent on the bus as a U16
        offset: 0


    # Transmission Controller Internal:
    tcmTargetRPM_rpm:
        id: 65
        motec_name: Target RPM
        unit: rpm
        type: UNSIGNED16
        encoding: MSB
        scale: 1
        offset: 0

    tcmCurrentGear_state:
        id: 66
        motec_name: Gear
        unit: ''
        type: FLOATING
        encoding: MSB
        scale: 1
        offset: 0

    tcmCurrentlyMoving_state:
        id: 67
        motec_name: Currently Moving
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmAntiStallActive_state:
        id: 68
        motec_name: Anti Stall
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmUsingClutch_state:
        id: 69
        motec_name: Using Clutch to Shift
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmShiftState_state:
        id: 70
        motec_name: Shift State
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmTimeShiftOnly_state:
        id: 71
        motec_name: Time Shifting Only
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmClutchlessDownshift_state:
        id: 72
        motec_name: Clutchless Downshift
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmError_state:
        id: 73
        motec_name: TCM Error
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmTargetGear_state:
        id: 74
        motec_name: TCM Target Gear
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmSpkCut_state:
        id: 75
        motec_name: TCM Spark Cut
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmSuccessfulShift_state:
        id: 76
        motec_name: TCM Successful Shift
        unit: ''
        type: UNSIGNED8
        encoding: MSB
        scale: 1
        offset: 0

    tcmNumShifts_ul:
        id: 77
        motec_name: TCM Shifts
        unit: ''
        type: UNSIGNED16
        encoding: MSB
        scale: 1
        offset: 0

    tcmNumSuccessfulShifts_ul:
        id: 78
        motec_name: TCM Num Successful Shifts
        unit: ''
        type: UNSIGNED16
        encoding: MSB
        scale: 1
        offset: 0
    # END TCM



groups: [
    # High Frequency ECU (Custom Set 1)
    {
        id: 0x100,
        parameters: [
            {name: engineRPM_rpm,       start: 0, length: 2},
            {name: throttlePos_percent, start: 2, length: 2},
            {name: lambda1_LA,          start: 4, length: 2},
            {name: dynoTorque_V,        start: 6, length: 2}
        ]
    },
    {
        id: 0x101,
        parameters: [
            {name: aimLambda1_LA,        start: 0, length: 2},
            {name: fuelCutLevel_percent, start: 2, length: 2},
            {name: ignCutLevel_percent,  start: 4, length: 2},
            {name: ignAdvance_degrees,   start: 6, length: 2}
        ]
    },
    {
        id: 0x102,
        parameters: [
            {name: fuelInjDuty_percent, start: 0, length: 2}
        ]
    },
    # Low Frequency ECU (Custom Set 2)
    {
        id: 0x200,
        parameters: [
            {name: engineTemp_C,         start: 0, length: 2},
            {name: oilTemp_C,            start: 2, length: 2},
            {name: oilPressure_kPa,      start: 4, length: 2},
            {name: manifoldPressure_kPa, start: 6, length: 2}
        ]
    },
    {
        id: 0x201,
        parameters: [
            {name: manifoldTemp_C,        start: 0, length: 2},
            {name: fuelPressure_kPa,      start: 2, length: 2},
            {name: waterFlowRate_LPerMin, start: 4, length: 2},
            {name: fuelFlowRate_LPerMin,  start: 6, length: 2}
        ]
    },
    {
        id: 0x202,
        parameters: [
            {name: batteryVoltage_V, start: 0, length: 2},
            {name: ecu5VEng_V,       start: 2, length: 2},
            {name: ecu5VAux_V,       start: 4, length: 2},
            {name: ecuTemp_C,        start: 6, length: 2}
        ]
    },
    {
        id: 0x203,
        parameters: [
            {name: oilFanDuty_percent,    start: 0, length: 2},
            {name: waterPumpDuty_percent, start: 2, length: 2},
            {name: crankTorque_Nm,        start: 4, length: 2},
            {name: oilRadTemp1_C,         start: 6, length: 2}
        ]
    },
    {
        id: 0x204,
        parameters: [
            {name: oilRadTemp2_C, start: 0, length: 2}
        ]
    },
    # Steering Wheel Module
    {
        id: 0x250,
        parameters: [
            {name: swUpshift_state,    start: 0, length: 1},
            {name: swDownshift_state,  start: 1, length: 1},
            {name: swSlowClutch_state, start: 2, length: 1},
            {name: swFastClutch_state, start: 3, length: 1},
            {name: swButon0_state,     start: 4, length: 1},
            {name: swButon1_state,     start: 5, length: 1},
            {name: displayPage_state,  start: 6, length: 1}
        ]
    },
    {
        id: 0x251,
        # NOTE: This message is designed to be sent to the ECU over an ADL channel.
        # These are message types MoTeC sequential. This guide was followed to make
        # it work: https://www.motec.com.au/forum/viewtopic.php?f=11&t=4119
        parameters: [
            {name: swButon2_state, start: 3, length: 1},
            {name: swButon3_state, start: 5, length: 1},
            {name: swDial_ul,      start: 7, length: 1}
        ]
    },
    # TCM
    {
        id: 0x300,
        parameters: [
            {name: shifterPosition_mm,    start: 0, length: 2},
            {name: clutchPosition_mm,     start: 2, length: 2},
            {name: gearPosition_mm,       start: 4, length: 2},
            {name: counterShaftSpeed_rpm, start: 6, length: 2}
        ]
    },
    {
        id: 0x301,
        parameters: [
            {name: tcmTargetRPM_rpm,         start: 0, length: 2},
            {name: tcmCurrentGear_state,     start: 2, length: 1},
            {name: tcmCurrentlyMoving_state, start: 3, length: 1},
            {name: tcmAntiStallActive_state, start: 4, length: 1},
            {name: tcmUsingClutch_state,     start: 5, length: 1},
            {name: tcmShiftState_state,      start: 6, length: 1},
            {name: tcmError_state,           start: 7, length: 1}
        ]
    },
    {
        id: 0x302,
        parameters: [
            {name: tcmTimeShiftOnly_state,          start: 0, length: 1},
            {name: tcmClutchlessDownshift_state,    start: 1, length: 1},
            {name: tcmTargetGear_state,             start: 2, length: 1},
            {name: tcmSpkCut_state,                 start: 3, length: 1},
            {name: tcmSuccessfulShift_state,        start: 4, length: 1}
        ]
    },
    {
        id: 0x303,
        parameters: [
            {name: tcmNumShifts_ul,                 start: 0, length: 2},
            {name: tcmNumSuccessfulShifts_ul,       start: 2, length: 2}
        ]
    },
    {
        id: 0x600,
        parameters: [
            {name: waterTempBeforeOil_C, start: 0, length: 2},
            {name: waterTempAfterOil_C, start: 2, length: 2},
            {name: waterTempBeforeHeatExchanger_C, start: 4, length: 2},
            {name: waterTempAfterHeatExchanger_C, start: 6, length: 2}
        ]
    },
    {
        id: 0x601,
        parameters: [
            {name: pressure1_psi, start: 0, length: 2},
            {name: pressure2_psi, start: 2, length: 2},
            {name: pressure3_psi, start: 4, length: 2},
            {name: pressure4_psi, start: 6, length: 2}
        ]
    },
    {
        id: 0x602,
        parameters: [
            {name: pressure5_psi, start: 0, length: 2},
            {name: pressure6_psi, start: 2, length: 2},
            {name: flowRate2_Hz, start: 4, length: 2}
        ]
    },
    {
        id: 0x613,
        parameters: [
            {name: pressure7_psi, start: 0, length: 2},
            {name: pressure8_psi, start: 2, length: 2},
            {name: loadcell_voltage, start: 4, length: 2}
        ]
    },
    {
        id: 0x603,
        parameters: [
            {name: temp1_C,       start: 0, length: 2},
            {name: temp2_C,       start: 2, length: 2}
        ]
    },
    {
        id: 0x604,
        parameters: [
            {name: temp3_C, start: 0, length: 2},
            {name: temp4_C, start: 2, length: 2},
            {name: temp5_C, start: 4, length: 2},
            {name: temp6_C, start: 6, length: 2}
        ]
    },
    {
        id: 0x605,
        parameters: [
            {name: temp7_C,           start: 0, length: 2},
            {name: temp8_C,           start: 2, length: 2},
            {name: flowRate1_Hz, start: 4, length: 2}
        ]
    },
    {
        id: 0x700,
        parameters: [
            {name: lapBeacon_ul, start: 0, length: 2}
        ]
    }
]

commands:
    SET_LED_STATE:
        name: SET_LED_STATE
        id: 0
        param_0: LED state
        param_1: LED state (duplicate)
        param_2: LED state (duplicate)
        param_3: LED state (duplicate)
        comment: Only the first led_state is used, the rest are duplication for testing
        
    SET_RTC_TIME:
        name: SET_RTC_TIME
        id: 1
        param_0: hour
        param_1: minute
        param_2: second
        param_3: UNUSED
        comment: pass in the hours, minutes, and seconds to set the RTC time. This
            is in 24 hour format
    SET_RTC_DATE:
        name: SET_RTC_DATE
        id: 2
        param_0: year
        param_1: month
        param_2: day
        param_3: weekday
        comment: pass in the year, month, date, and day of week to set the RTC date.
            Year is number of years since 1970. For weekday, mon = 1, teus = 2, ...,
            sun = 7
            
    LOG_COMPLETE:
        name: LOG_COMPLETE
        id: 3
        param_0: UNUSED
        param_1: UNUSED
        param_2: UNUSED
        param_3: UNUSED
        comment: Sent by the DLM after completing a write to storage

errors:
    ID_NOT_FOUND:
        name: ID_NOT_FOUND
        id: 0
    COMMAND_ID_NOT_FOUND:
        name: COMMAND_ID_NOT_FOUND
        id: 1
    PARAM_NOT_ENABLED:
        name: PARAM_NOT_ENABLED
        id: 2
    SIZE_ERROR:
        name: SIZE_ERROR
        id: 3
    DATATYPE_NOT_FOUND:
        name: DATATYPE_NOT_FOUND
        id: 4
    COMMAND_NOT_ENABLED:
        name: COMMAND_NOT_ENABLED
        id: 5
